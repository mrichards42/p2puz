!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="lVK7")}({"+l/g":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GridView=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=h(n("PbPb")),a=h(n("0iPh")),u=h(n("b59J")),s=h(n("A/A2")),l=h(n("AupB")),c=n("4JHP"),f=h(n("JzeR"));function h(e){return e&&e.__esModule?e:{default:e}}function p(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n("yTfL");var g="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*()_+=-[]{}\\|/?><,`~'\"",b='<div class="puzzle-grid"><table /></div>',m=[2,3,"long"].map(function(e){return"text-"+e}).join(" ");function w(e){switch(e.length){case 0:case 1:return"";case 2:return"text-2";case 3:return"text-3";default:return"text-long"}}var _=t.GridView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.template,i=void 0===n?b:n,o=p(e,["template"]);d(this,t);var u=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r({template:i},o)));return u.$table=u.$("table"),u.$squares=null,u.rows=0,u.cols=0,u.aspectRatio=1,u.$el.click(function(e){var t=(0,a.default)(e.target),n=t.find(".square");n.length||(n=t.closest(".square"));var r=n.data("idx");return null!=r&&u.presenter.onSquareClick(r)}),u}return y(t,l.default.View),i(t,[{key:"createGrid",value:function(e,t){this.$table.empty(),this.rows=e,this.cols=t,this.aspectRatio=t/e,this.$table.append("\n      "+o.default.range(e).map(function(e){return"\n        <tr> "+o.default.range(t).map(function(n){return'\n          <td>\n            <div class="square" data-idx='+(t*e+n)+'>\n              <div class="solution text" />\n              <div class="user text" />\n              <div class="number" />\n              <div class="decoration" />\n            </div>\n          </td> '}).join("")+"\n        </tr> "}).join("")+"\n    "),this.$squares=this.$el.find(".square"),this.resizeGrid()}},{key:"renderSquare",value:function(e){var t=this.$squares.eq(e.idx);t.parent().toggleClass("blacksquare",e.isBlack),t.children(".number").text(e.number||"").show(e.number>0),t.children(".solution").text(e.solution).removeClass(m).addClass(w(e.solution)),t.children(".user").text(e.letter).removeClass(m).addClass(w(e.letter)),t.toggleClass("correct",e.isCorrect),e.shapebg?t.children(".decoration").addClass("decoration-"+e.shapebg).show():t.children(".decoration").hide()}},{key:"renderRemoteLetter",value:function(e,t){var n=this.$squares.eq(e),r=n.children(".remote");r.length||(r=(0,a.default)('<div class="text remote">').appendTo(n)),r.text(t||"")}},{key:"renderCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cursor-highlight";this.$("."+t).removeClass(t),this.$squares.eq(e.idx).parent().addClass(t)}},{key:"renderWordHighlight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"word-highlight";this.$("."+t).removeClass(t);var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;this.$squares.eq(u.idx).parent().addClass(t)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"setRebusSquare",value:function(e,t){e.$el.detach(),this.$squares.eq(t.idx).append(e.$el)}},{key:"resizeGrid",value:function(){if(this.rows&&this.cols){var e=this.$table,t=this.$el.parent(),n=t.width(),r=t.height(),i=n-1*(this.cols+1),o=r-1*(this.rows+1);if(this._lastWidth!==i||this.lastHeight!==o)i/o>this.aspectRatio?this._scale=o/(e.height()/(this._scale||1)):this._scale=i/(e.width()/(this._scale||1)),this._scale=+this._scale.toFixed(4),(this._scale<0||isNaN(this._scale))&&(this._scale=.1),e.css({fontSize:this._scale+"em"}),e.css({left:Math.max(0,Math.floor((n-e.width())/2)),top:Math.max(0,Math.floor((r-e.height())/2))}),this._lastWidth=i,this._lastHeight=o}}},{key:"getScale",value:function(){return this._scale||1}}]),t}(),z=(0,c.EventEmitterMixin)(l.default.Presenter,"rebus-show","rebus-hide"),O=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.view,i=void 0===n?new _:n,o=(e.config,p(e,["view","config"]));d(this,t);var a=v(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r({view:i},o)));return a.puzzle=null,a.bindEvents(),a}return y(t,z),i(t,[{key:"setPuzzle",value:function(e){var t=this;this.puzzle=e,this._remoteState=null,this.view.createGrid(e.rows,e.cols);var n=!0,r=!1,i=void 0;try{for(var o,a=e.squares[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;this.view.renderSquare(u)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}this.puzzle.on("letter",function(e){return t.view.renderSquare(e)}),this.puzzle.on("cursor",function(e,n){t.view.renderCursor(e);var r=t.puzzle.findSquaresInWord(e,n);t.view.renderWordHighlight(r),t.toggleRebus(!1)})}},{key:"onSquareClick",value:function(e){var t=this.puzzle.squares[e];return t.idx===this.puzzle.currentSquare.idx?this.swapOrientation():this.moveCursor(t),!1}},{key:"bindEvents",value:function(){var e=this;this.$el.contextmenu(function(t){return e.swapOrientation()});var t=new u.default;t.bind("right",function(){return e.moveOne("across","next")}),t.bind("left",function(){return e.moveOne("across","prev")}),t.bind("down",function(){return e.moveOne("down","next")}),t.bind("up",function(){return e.moveOne("down","prev")}),t.bind("shift+right",function(){return e.slideOne("across","next")}),t.bind("shift+left",function(){return e.slideOne("across","prev")}),t.bind("shift+down",function(){return e.slideOne("down","next")}),t.bind("shift+up",function(){return e.slideOne("down","prev")}),t.bind("tab",function(){return e.moveOneClue("next")}),t.bind("shift+tab",function(){return e.moveOneClue("prev")}),t.bind("home",function(){return e.moveCursor(e.puzzle.findWordStart("current"))}),t.bind("end",function(){return e.moveCursor(e.puzzle.findWordEnd("current"))}),t.bind("ins",function(){return e.toggleRebus()});var n=g.split("").concat(g.toLowerCase().split(""));t.bind(n,function(t,n){return e.enterLetter(n.toUpperCase(),"next")}),t.bind("del",function(){return e.enterLetter("")}),t.bind("backspace",function(){return e.enterLetter("","prev")}),t.bind("space",function(){switch(s.default["grid.keys.space"]){case"orientation":return e.swapOrientation();case"erase":default:return e.enterLetter("","next")}})}},{key:"toggleRebus",value:function(e){var t=this;if(null==e&&(e=!(this._rebus&&this._rebus.isShown())),e||this._rebus){var n=this._rebus;if(n||(n=this._rebus=new f.default).on("submit",function(e){t.enterLetter(e,"next"),t.toggleRebus(!1)}),e){var r=this.puzzle.currentSquare;n.setSquare(r),this.view.setRebusSquare(n.view,r),n.show(),this.emit("rebus-show",r)}else n.hide(),this.emit("rebus-hide",this.puzzle.currentSquare)}}},{key:"moveCursor",value:function(e,t){return"number"==typeof e&&(e=this.puzzle.squares[e]),e&&e.isWhite&&this.puzzle.moveCursor(e,t),!1}},{key:"moveClue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.puzzle.currentOrientation,n=void 0;switch(s.default["grid.movement.newClue"]){case"start":n=this.puzzle.findWordStart(e,t);break;case"blank":n=this.findBlank(this.puzzle.findWordStart(e,t),t);break;case null:default:n=e}return this.moveCursor(n||e,t)}},{key:"swapOrientation",value:function(){return this.moveCursor(this.puzzle.currentSquare,this.puzzle.oppositeOrientation),!1}},{key:"enterLetter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.puzzle.currentSquare;return n.letter=e,t&&(n=n[t][this.puzzle.currentOrientation],e&&"blank"===s.default["grid.movement.afterLetter"]&&(n=this.findBlank(n)||n),n&&!n.isBlack&&this.moveCursor(n)),!1}},{key:"moveOne",value:function(e,t){var n=this;if(e!==this.puzzle.currentOrientation&&this.puzzle.currentSquare.isEmpty&&s.default["grid.movement.pauseBeforeSwitch"])return this.moveCursor(this.puzzle.currentSquare,e),!1;var r=this.puzzle.findSquare({from:"current",orientation:e,direction:t,test:function(e){return e!==n.puzzle.currentSquare&&e.isWhite}});return this.moveCursor(r,e),!1}},{key:"slideOne",value:function(e,t){var n=this;if(e===this.puzzle.currentOrientation){var r=this.puzzle.findWordStart("current",e);r=this.puzzle.findSquare({from:r,orientation:e,direction:t+"Wrap",test:function(t){return t!==r&&t.isStart(e)}}),this.moveClue(r)}else{var i=this.puzzle.findSquare({from:"current",orientation:e,direction:t,test:function(e){return e!==n.puzzle.currentSquare&&e.isWhite}});this.moveClue(i)}return!1}},{key:"moveOneClue",value:function(e){var t=this.puzzle.currentOrientation,n=this.puzzle.currentClue.idx,r=void 0;return"next"===e?(r=this.puzzle.clues[t][n+1])||(t="across"===t?"down":"across",r=this.puzzle.clues[t][0]):(r=this.puzzle.clues[t][n-1])||(t="across"===t?"down":"across",r=this.puzzle.clues[t].slice(-1)[0]),this.moveClue(r.square,t),!1}},{key:"findBlank",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.puzzle.currentOrientation;return this.puzzle.findSquare({from:e,orientation:t,inWord:!0,test:function(e){return e.isEmpty}})}},{key:"setRemoteState",value:function(e){var t=this,n=this.puzzle.squares[e.cursor],r=e.orientation;this.view.renderCursor(n,"remote-cursor-highlight");var i=this.puzzle.findSquaresInWord(n,r);this.view.renderWordHighlight(i,"remote-word-highlight");var o=void 0;o=s.default["remote.letter.overwrite"]?function(e,n){t.puzzle.state.grid[n]=e,t.view.renderSquare(t.puzzle.squares[n])}:function(e,n){t.view.renderRemoteLetter(n,e)},this._remoteState?e.grid.forEach(function(e,n){t._remoteState.grid[n]!==e&&o(e,n)}):e.grid.forEach(o),this._remoteState=e}}]),t}();t.default=O},"0iPh":function(e,t){e.exports=jQuery},"3r50":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new(Function.prototype.bind.apply(DataView,[null].concat(t)));return r.getString8=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=new Uint8Array(this.buffer,this.byteOffset+e,t);return String.fromCharCode.apply(null,n)},r.getString16=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=new Uint16Array(this.buffer,this.byteOffset+e,t);return String.fromCharCode.apply(null,n)},r.getDelimitedString8=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"string"==typeof t&&(t=t.charCodeAt(0));for(var n=e;n<this.byteLength;++n)if(this.getUint8(n)===t)return this.getString8(e,n-e);return this.getString8(e)},r.getDelimitedString16=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;"string"==typeof t&&(t=t.charCodeAt(0));for(var n=e;n<this.byteLength;++n)if(this.getUint16(n)===t)return this.getString16(e,n-e);return this.getString16(e)},r}},"4JHP":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(){o(this,e),this._eventEmitter=this,this._eventRegex=null,this._registerEventTypes.apply(this,arguments)}return i(e,[{key:"registerEventType",value:function(e){this._callbacks||(this._callbacks={}),"*"===e?this._addRegexEvent(/.+/):e instanceof RegExp?this._addRegexEvent(e):this._callbacks[e]||(this._callbacks[e]=[])}},{key:"_registerEventTypes",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;this.registerEventType(s)}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}}},{key:"_addRegexEvent",value:function(e){e="(?:"+e.source+")",this._regexEvents?this._eventRegex=new RegExp(this._regexEvents.source+"|"+e):this._eventRegex=new RegExp(e)}},{key:"forwardEvents",value:function(e){for(var t=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=function(n){t.registerEventType(n),e.on(n,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return t.emit.apply(t,[n].concat(r))})},a=!0,u=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){o(l.value)}}catch(e){u=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(u)throw s}}}},{key:"isValidEvent",value:function(e){return!!this._callbacks[e]||this._eventRegex&&this._eventRegex.test(e)}},{key:"on",value:function(e,t){if(e instanceof RegExp)this._regexCallbacks||(this._regexCallbacks=[]),this._regexCallbacks.push([e,t]);else if(this._callbacks[e])this._callbacks[e].push(t);else{if(!this._eventRegex||!this._eventRegex.test(e))throw new Error("Invalid event type: "+e);this._callbacks[e]=[t]}}},{key:"emit",value:function(e){var t=this._callbacksFor(e);if(!t){if(this.isValidEvent(e))return;throw new Error("Invalid event type: "+e)}for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=!0,a=!1,u=void 0;try{for(var s,l=t[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var c=s.value;setTimeout(c.bind.apply(c,[this].concat(r)),0)}}catch(e){a=!0,u=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw u}}}},{key:"_callbacksFor",value:function(e){var t=this._callbacks[e];if(this._regexCallbacks){var n=[],i=!0,o=!1,a=void 0;try{for(var u,s=this._regexCallbacks[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value,c=r(l,2),f=c[0],h=c[1];f.test(e)&&n.push(h)}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}if(n)return(t||[]).concat(n)}return t}}]),e}();t.default=a;var u=Object.getOwnPropertyNames(a.prototype).filter(function(e){return!/^(constructor|_)/.test(e)});t.EventEmitterMixin=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(t){function r(){for(var e,t=arguments.length,i=Array(t),s=0;s<t;s++)i[s]=arguments[s];o(this,r);var l,c=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(i)));c._eventEmitter?(l=c._eventEmitter)._registerEventTypes.apply(l,n):(c._eventEmitter=new(Function.prototype.bind.apply(a,[null].concat(n))),u.forEach(function(e){c[e]=function(){var t;return(t=c._eventEmitter)[e].apply(t,arguments)}}));return c}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),r}()}},"4nC3":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if((e=e.filter(function(e){return"string"==typeof e})).length)return r=function(e){return"https://cdn.polyfill.io/v2/polyfill.js?features="+e.join(",")}(e),i=t,o=n,(a=document.createElement("script")).src=r,a.onload=function(){i()},a.onerror=function(){var e=new Error("Failed to load script "+r);if(!o)throw e;o(e)},void document.head.appendChild(a);t();var r,i,o,a}},"50u0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PromptView=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("AupB"),u=(r=a)&&r.__esModule?r:{default:r};function s(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n("oPln");var h='\n  <div class="clue-prompt">\n    <span class="clue-number" />\n    <span class="clue-text" />\n  </div>\n',p=t.PromptView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.template,r=void 0===n?h:n,o=s(e,["template"]);l(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i({template:r},o)));return a.$number=a.$(".clue-number"),a.$text=a.$(".clue-text"),a}return f(t,u.default.View),o(t,[{key:"renderClue",value:function(e){this.$number.html(e.number+e.orientation.slice(0,1).toUpperCase()),this.$text.html(e.text)}}]),t}(),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.view,r=void 0===n?new p:n,o=s(e,["view"]);l(this,t);var a=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i({view:r},o)));return a.puzzle=null,a}return f(t,u.default.Presenter),o(t,[{key:"setPuzzle",value:function(e){var t=this;this.puzzle=e,this.puzzle.on("cursor",function(e,n){t.view.renderClue(t.puzzle.currentClue)})}}]),t}();t.default=d},"6VXG":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENTS=void 0;var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("4JHP"),a=(r=o)&&r.__esModule?r:{default:r};var u=t.EVENTS=["connect","close","error","stream"],s=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.broker,o=void 0===i?n("GM9j").default:i,a=r.autoReconnect,s=void 0===a?10:a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u,[/^data:/])));return l.peer=null,l.autoReconnect=s,l._connectTries=0,l.brokerConnection=o,l._queue=[],l}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"connect",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unknown";return this._connecting?Promise.resolve(this.peer):(this._connecting=!0,this.peer=null,this._connectTries++,this.brokerConnection(e,n).then(function(r){if(t.peer=r,t._connectTries=0,console.log("connected to remote peer"),t.peer.on("data",function(e){return t._handleData(e)}),t.emit("connect",r),t.peer.on("close",function(){t.emit("close"),t._connecting=!1,t.peer=null,t.autoReconnect&&(console.log("peer disconnected -- attempting reconnect"),t.connect(e,n))}),t._queue.length){t.peer.send(JSON.stringify({type:"time-sync",timestamp:(new Date).getTime()}));var i=!0,o=!1,a=void 0;try{for(var u,s=t._queue[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;t.peer.send(l)}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}t._queue=[]}}).catch(function(r){t._connecting=!1,t.peer=null,console.log("Error connecting",r),t._connectTries<=t.autoReconnect?(console.log("attempting reconnect","(try "+t._connectTries+" of "+t.autoReconnect+")"),t.connect(e,n)):console.log("reconnect failed "+t.autoReconnect+" times; giving up")}))}},{key:"send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.peer)this.peer.send(JSON.stringify({type:e,data:t}));else if(n){var r=(new Date).getTime();this._queue.push(JSON.stringify({type:e,data:t,timestamp:r}))}}},{key:"_handleData",value:function(e){var t=JSON.parse(e),n=t.type,r=t.data,i=t.timestamp;"time-sync"===n?this._remoteOffset=(new Date).getTime()-i:i&&(i+=this._remoteOffset||0),this.emit("data:"+n,r,i)}}]),t}();t.default=s},"7lks":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("4JHP"),a=(r=o)&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var s={};["puz","json"].forEach(function(e){s[e]=n("JVFu")("./"+e).default});var l=function(e){function t(e,n){u(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"cursor","letter"));return r.rows=e,r.cols=n,r.size=e*n,r.squares=[],r.clues={},r.meta={title:"",author:"",copyright:""},r.state=new h(r),r._initGrid(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"_init",value:function(){if(this._matchCluesAndGrid(),null==this.currentSquare||null==this.currentOrientation){var e=this.currentOrientation||"across",t=this.findSquare({from:this.currentSquare||this.squares[0],orientation:e,test:function(e){return e.isWhite}});this.moveCursor(t,e)}return this}},{key:"addClue",value:function(e,t,n){this.clues[t]||(this.clues[t]=[]),this.clues[t].push(new f(this,this.clues[t].length,e,t,n))}},{key:"save",value:function(e){return s[e].save(this)}},{key:"moveCursor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentOrientation;e&&(this.state.cursor=e.idx,this.state.orientation=t,this.emit("cursor",this.currentSquare,this.currentOrientation))}},{key:"getSquare",value:function(e,t){if(!(e<0||t<0||e>this.lastRow||t>this.lastCol))return this.squares[this.cols*e+t]}},{key:"findSquare",value:function(e){var t=e.test,n=e.from,r=e.orientation,i=void 0===r?this.currentOrientation:r,o=e.direction,a=void 0===o?"next":o,u=e.inWord,s=void 0!==u&&u,l=e.iterate,c=void 0!==l&&l;"current"===n&&(n=this.currentSquare);var f=n;do{if(!f)return;if(s&&!f.isSameWord(n,i))return;if(t(f,i,a)&&!c)return f;f=f[a][i]}while(f!==n)}},{key:"forEachSquare",value:function(e,t){e.from=e.from||this.squares[0],e.direction=(e.direction||"next")+"Wrap",e.iterate=!0,e.test=e.test||t,this.findSquare(e)}},{key:"findWordStart",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentOrientation;if("current"===e&&(e=this.currentSquare),e)return e.clues[t].square}},{key:"findWordEnd",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentOrientation;return this.findSquare({from:e,orientation:t,test:function(e){return e.isEnd(t)}})}},{key:"findSquaresInWord",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.currentOrientation,n=[];return this.forEachSquare({from:this.findWordStart(e,t),orientation:t,inWord:!0,test:function(e){return n.push(e)}}),n}},{key:"_initGrid",value:function(){for(var e=0;e<this.rows;++e)for(var t=0;t<this.cols;++t){var n=this.cols*e+t;this.squares.push(new c(this,e,t,n,"",0))}var r=!0,i=!1,o=void 0;try{for(var a,u=this.squares[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;s.prev={across:this.getSquare(s.row,s.col-1),down:this.getSquare(s.row-1,s.col)},s.next={across:this.getSquare(s.row,s.col+1),down:this.getSquare(s.row+1,s.col)},s.prevWrap={across:s.prev.across||this.getSquare(s.row-1,this.lastCol),down:s.prev.down||this.getSquare(this.lastRow,s.col-1)},s.nextWrap={across:s.next.across||this.getSquare(s.row+1,0),down:s.next.down||this.getSquare(0,s.col+1)}}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}}},{key:"_matchCluesAndGrid",value:function(){var e=this,t={};for(var n in this.clues){t[n]={};var r=!0,i=!1,o=void 0;try{for(var a,u=this.clues[n][Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var s=a.value;t[n][s.number]=s}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}}var l=null;["across","down"].forEach(function(n){e.forEachSquare({orientation:n},function(e){var r=t[n][e.number];(!l||e.number!==l.number&&r)&&(l=r)&&(l.square=e),e.clues[n]=e.isWhite?l:null})})}},{key:"currentSquare",get:function(){return this.squares[this.state.cursor]}},{key:"currentOrientation",get:function(){return this.state.orientation}},{key:"oppositeOrientation",get:function(){return"across"===this.state.orientation?"down":"across"}},{key:"currentClue",get:function(){return this.currentSquare.clues[this.currentOrientation]}},{key:"oppositeClue",get:function(){return this.currentSquare.clues[this.oppositeOrientation]}},{key:"lastCol",get:function(){return this.cols-1}},{key:"lastRow",get:function(){return this.row-1}}],[{key:"load",value:function(e,t){var n=s[e].load(t);if(n)return n._init()}},{key:"fetch",value:function(e,n){return Promise.resolve(s[e].fetch(n)).then(function(n){return t.load(e,n)})}}]),t}();t.default=l;var c=function(){function e(t,n,r,i,o,a){u(this,e),this.puzzle=t,this.row=n,this.col=r,this.idx=i,this.solution=o,this.number=a,this.prev=null,this.next=null,this.prevWrap=null,this.nextWrap=null,this.shapebg=null,this.clues={}}return i(e,[{key:"isStart",value:function(e){return!this.isBlack&&(!this.prev[e]||this.prev[e].isBlack)}},{key:"isEnd",value:function(e){return!this.isBlack&&(!this.next[e]||this.next[e].isBlack)}},{key:"isSameWord",value:function(e,t){return this.clues[t]===e.clues[t]}},{key:"letter",get:function(){return this.puzzle.state.grid[this.idx]||""},set:function(e){this.puzzle.state.grid[this.idx]=e,this.puzzle.emit("letter",this,e)}},{key:"isBlack",get:function(){return"."===this.solution}},{key:"isWhite",get:function(){return!this.isBlack}},{key:"isEmpty",get:function(){return!this.isBlack&&""===this.letter}},{key:"isCorrect",get:function(){return this.solution===this.letter}}]),e}(),f=function e(t,n,r,i,o){u(this,e),this.idx=n,this.number=r,this.orientation=i,this.text=o,this.square=null},h=function e(t){u(this,e),this.cursor=null,this.orientation=null,this.grid=t.squares.map(function(e){return""})}},"80Og":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("4JHP"),a=(r=o)&&r.__esModule?r:{default:r},u=n("6VXG");var s=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new u.PeerManager,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(u.EVENTS))));for(var o in i.manager=n,u.EVENTS.forEach(function(e){i.manager.on(e,function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return i.emit.apply(i,[e].concat(n))})}),i._dataTypes={},r)i.registerDataType(o,r[o]);return i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"registerDataType",value:function(e,t){var n=this;if(this.isValidEvent(e))throw new Error("An event with type: '"+e+"' already exists");this.registerEventType(e),this._dataTypes[e]=t||{},this.manager.on("data:"+e,function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];n._handleData.apply(n,[e,t].concat(i))})}},{key:"connect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.manager.connect(e,t)}},{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this._dataTypes[e];if(!r)throw new Error("Sending unknown data type: "+e);null===t&&r.default&&(t=r.default(this)),r.send&&(t=r.send(t,this)),this.manager.send(e,t,null!=n?n:r.queue)}},{key:"_handleData",value:function(e,t){var n=this._dataTypes[e];if(!n)throw new Error("Receiving unknown data type: "+e);n.receive&&(t=n.receive(t,this));for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];this.emit.apply(this,[e,t].concat(i))}}]),t}();t.default=s},"8zfI":function(e,t){},"A/A2":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("rX2q"),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default.set({grid:{movement:{newClue:"blank",pauseBeforeSwitch:!0,afterLetter:"next"},keys:{space:"erase"}},cluelist:{scroll:{anchor:"middle",buffer:5}},remote:{letter:{overwrite:!0}}})},APq2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(n("Bfj3")),o=a(n("f+26"));function a(e){return e&&e.__esModule?e:{default:e}}t.default={beq:{type:"puz",url:"http://www.brendanemmettquigley.com",puzPattern:/"(\S+brendanemmettquigley\.com\/files\/\S+\.puz)"/,days:[!1,!0,!1,!1,!0,!1,!1],formatUrl:function(e){var t=this,n=this.url+"/"+(0,i.default)(e,"YYYY/MM/DD");return(0,o.default)(n).then(function(e){return e.text()}).then(function(e){var n=e.match(t.puzPattern)||[];return r(n,2)[1]})}},jonesin:{url:"http://herbach.dnsalias.com/Jonesin/jz{{YYMMDD}}.puz",type:"puz",days:[!1,!1,!0,!1,!1,!1,!1],fixDate:function(e){return e.setDate(e.getDate()+2),e}},wsj:{url:"http://herbach.dnsalias.com/wsj/wsj{{YYMMDD}}.puz",type:"puz",days:[!1,!1,!1,!1,!1,!1,!0]},wapo:{url:"http://herbach.dnsalias.com/WaPo/wp{{YYMMDD}}.puz",type:"puz",days:[!0,!1,!1,!1,!1,!1,!1]}}},AupB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n("0iPh"),a=(r=o)&&r.__esModule?r:{default:r};function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(){l(this,e)}return i(e,[{key:"$",value:function(e){return this.$el.find(e)}},{key:"append",value:function(e){return this.$el.append(this._as$(e)),this}},{key:"appendTo",value:function(e){return this.$el.appendTo(this._as$(e)),this}},{key:"clear",value:function(){return this.$el.empty(),this}},{key:"remove",value:function(){return this.$el.remove(),this}},{key:"_as$",value:function(t){return t instanceof e?t.$el:(0,a.default)(t)}},{key:"toggle",value:function(e){return null==e&&(e=!this.isShown()),e?this.show():this.hide()}},{key:"isShown",value:function(){return"none"!==this.$el.css("display")}}]),e}(),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.$el=(0,a.default)(e.template||"<div>"),n}return s(t,c),i(t,[{key:"setPresenter",value:function(e){this.presenter=e}},{key:"hide",value:function(){return this.$el.hide(),this}},{key:"show",value:function(){return this.$el.show(),this}},{key:"setExclusiveClass",value:function(e,t){t=t.split(" ").map(function(t){return e+"-"+t}).join(" ");var n="_classes_"+e,r=this[n];if(r!==t)return r&&this.$el.removeClass(r),this.$el.addClass(t),this[n]=t,this}},{key:"hasExclusiveClass",value:function(e,t){t=t.split(" ").map(function(t){return e+"-"+t}).join(" ");var n="_classes_"+e;return new RegExp("(?:^| )"+t+"(?:$| )").test(this[n]||"")}}]),t}(),h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!e.view)throw new Error("view is required");return n.view=e.view,n.view.setPresenter(n),e.el&&(0,a.default)(e.el).append(n.$el),n}return s(t,c),i(t,[{key:"hide",value:function(){return this.view.hide(),this}},{key:"show",value:function(){return this.view.show(),this}},{key:"$el",get:function(){return this.view.$el}}]),t}();t.default={View:f,Presenter:h}},BeXi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarView=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n("0iPh")),a=s(n("AupB")),u=s(n("iyud"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n("cFSX");var p='\n  <div class="puzzle-toolbar">\n  </div>\n',d=t.ToolbarView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.template,i=void 0===n?p:n,o=l(e,["template"]);return c(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r({template:i},o)))}return h(t,a.default.View),i(t,[{key:"addTool",value:function(e){this.$el.append(e.$el)}}]),t}(),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.view,i=void 0===n?new d:n,o=l(e,["view"]);c(this,t);var a=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r({view:i},o)));return a.puzzle=null,a.tools=[],a}return h(t,a.default.Presenter),i(t,[{key:"setPuzzle",value:function(e){this.puzzle=e;var t=!0,n=!1,r=void 0;try{for(var i,o=this.tools[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.setPuzzle&&a.setPuzzle(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"setTools",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.view.clear(),this.tools=[];var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this.addTool(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"addTool",value:function(e){e=this._makeTool(e),this.view.addTool(e.view),this.tools.push(e)}},{key:"toggleTool",value:function(e,t){e instanceof a.default.Presenter||(e=this.getTool(e)),null==t?e.$el.toggleClass("toolbar-toggled"):e.$el.toggleClass("toolbar-toggled",t)}},{key:"_makeTool",value:function(e){var t=this;if(e instanceof a.default.Presenter)return e;var n=void 0;if(n="function"==typeof e.html?new u.default({format:e.html,class:e.class}):new a.default.Presenter({view:new a.default.View({template:y(e)})}),e.items){n.$el.addClass("toolbar-menu"),n.$el.click(function(){return n.$el.toggleClass("toolbar-menu-show"),!1});var r=(0,o.default)('<div class="toolbar-submenu">').appendTo(n.$el),i=!0,s=!1,l=void 0;try{for(var c,f=(e.items||[])[Symbol.iterator]();!(i=(c=f.next()).done);i=!0){var h=c.value,p=this._makeTool(h);r.append(p.$el),this.tools.push(p)}}catch(e){s=!0,l=e}finally{try{!i&&f.return&&f.return()}finally{if(s)throw l}}}var d=function(r){var i=e.events[r];n.$el.on(r,function(e){return i(e,n,t),!1})};for(var v in e.events||{})d(v);return e.setup&&e.setup(n,this),n}}]),t}(),y=function(e){return'\n  <div class="toolbar-tool '+(e.class||"")+'"\n      '+(e.style?'style="'+e.style+'"':"")+"\n      "+(e.label?'title="'+e.label+'"':"")+">\n    <span>"+(e.html||e.label)+"</span>\n  </div>\n"};t.default=v},Bfj3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=["January","February","March","April","May","June","July","August","September","October","November","December"],o={YYYY:function(e){return e.getFullYear()},YY:function(e){return(""+e.getFullYear()).slice(-2)},MMMM:function(e){return i[e.getMonth()]},MMM:function(e){return i[e.getMonth()].slice(0,3)},MM:function(e){return("0"+(e.getMonth()+1)).slice(-2)},M:function(e){return e.getMonth()+1},DDDD:function(e){return r[e.getDay()]},DDD:function(e){return r[e.getDay()].slice(0,3)},DD:function(e){return("0"+e.getDate()).slice(-2)},D:function(e){return e.getDate()},hh:function(e){return("0"+e.getHours()).slice(-2)},h:function(e){return e.getHours()},mm:function(e){return("0"+e.getMinutes()).slice(-2)},m:function(e){return e.getMinutes()},ss:function(e){return("0"+e.getSeconds()).slice(-2)},s:function(e){return e.getSeconds()},"AM/PM":function(e){return e.getHours()<12?"AM":"PM"},"am/pm":function(e){return e.getHours()<12?"am":"pm"}},a={hh:function(e){return u(o.hh(e),!0)},h:function(e){return u(o.h(e),!1)}};function u(e,t){return"00"===e||"0"===e?"12":e>12?t?("0"+(e-12)).slice(-2):e-12:e}var s=new RegExp(Object.keys(o).sort(function(e,t){return t.length-e.length}).join("|"),"g");t.default=window.strftime=function(e,t){t||"string"!=typeof e||(t=e,e=new Date);var n={};"string"==typeof e&&(e=new Date(e));var r=/am\/pm/i.test(t);return t.replace(s,function(t){return n[t]=n[t]||(r&&a[t]||o[t])(e)})}},GM9j:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){return new Promise(function(n,u){i.default.getItem(s).then(function(l){l||(l=o.default.generateUUID(),i.default.setItem(s,l)),t=t+"@"+l;var c=new o.default({subscribeKey:"sub-c-0f6fdcd4-c8a0-11e7-8c50-5af512f03656",publishKey:"pub-c-ca7b3f31-f860-4fad-b50c-8af521080167",uuid:l,ssl:!0}),f=null;function h(r,i){var o=new a.default({initiator:i});return o.remoteId=r,o.on("signal",function(n){c.publish({channel:e+"/"+r,message:{user:t,type:"signal",signal:n}})}),o.on("connect",function(){c.stop(),n(o)}),o.on("error",function(e){c.stop(),u(e)}),o}var p=0;c.addListener({status:function(n){"PNConnectedCategory"===n.category&&c.publish({channel:e+"/public",message:{user:t,type:"ping"}})},message:function(e){if(r.default.isObject(e.message)&&e.message.user){var n=e.message.user;switch(e.message.type){case"ping":n===t?++p>1&&(console.log("page opened twice! stopping this instance"),c.stop(),u(new Error("Attempt to connect to self"))):p>0&&(f=f||h(n,!0));break;case"signal":if(n===t){console.log("got a signal from ourself... how did this happen?");break}(f=f||h(n,!1)).signal(e.message.signal);break;default:console.log("Unknown message type!",e)}}else console.log("Unknown message format!",e)}}),console.log("Connecting to PubNub as",t),console.log("Subscribing to rooms: ",e+"/public",e+"/"+t),c.subscribe({channels:[e+"/public",e+"/"+t]})}).catch(u)})};var r=u(n("PbPb")),i=u(n("Um79")),o=u(n("qIkO")),a=u(n("uYBq"));function u(e){return e&&e.__esModule?e:{default:e}}var s="PubNubPeer.UUID"},HALP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PuzzleView=void 0;var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=p(n("PbPb")),u=p(n("0iPh")),s=p(n("AupB")),l=p(n("+l/g")),c=p(n("50u0")),f=p(n("xP+I")),h=p(n("iyud"));function p(e){return e&&e.__esModule?e:{default:e}}function d(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n("Lz0r");var b='\n  <div class="puzzle">\n    <div class="grid-and-prompt">\n      <div class="prompt" />\n      <div class="grid" />\n    </div>\n    <div class="clues-container" />\n  </div>\n',m=t.PuzzleView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.template,r=void 0===n?b:n,o=d(e,["template"]);v(this,t);var s=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i({template:r},o)));return s.$cluesContainer=s.$(".clues-container"),s.$prompt=s.$(".prompt"),s.$grid=s.$(".grid"),s.$gridAndPrompt=s.$(".grid-and-prompt"),s._gridAspect=1,s.handleResize=a.default.throttle(s.handleResize.bind(s),10),(0,u.default)(window).resize(function(){return s.handleResize()}),(0,u.default)(s.handleResize),s}return g(t,s.default.View),o(t,[{key:"addGrid",value:function(e){e.appendTo(this.$grid)}},{key:"addPrompt",value:function(e){e.appendTo(this.$prompt)}},{key:"addClueList",value:function(e){e.appendTo(this.$cluesContainer)}},{key:"addMetadata",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"below",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"grid";e.$el.addClass("metadata-"+t+"-"+n),"layout"===n?"above"===t?this.$el.prepend(e.$el):this.$el.append(e.$el):e.appendTo(this.$gridAndPrompt)}},{key:"setResponsive",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._isResponsive=e}},{key:"isResponsive",value:function(){return this._isResponsive}},{key:"togglePrompt",value:function(e){null==e&&(e=this.$el.hasClass("prompt-off")),this.setExclusiveClass("prompt",e?"on":"off")}},{key:"setLayoutOrientation",value:function(e){this._isLandscape="landscape"===e,this.setExclusiveClass("orientation",e)}},{key:"isLandscape",value:function(){return this._isLandscape}},{key:"isPortrait",value:function(){return!this._isLandscape}},{key:"setGridAspectRatio",value:function(e,t){this._gridAspect=e/t}},{key:"setClueLayout",value:function(e){this.setExclusiveClass("clues",e)}},{key:"show",value:function(){return function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.handleResize(),this}},{key:"handleResize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.$el.width(),n=this.$el.height();if(0!==t&&0!==n){var r=!this._lastWidth||!this._lastHeight;this._lastWidth===t&&this._lastHeight===n&&!0!==e||(this.isResponsive()&&(r&&this._constrainGrid(t,n),this.presenter.onResize(this._lastWidth,this._lastHeight,t,n)),this._constrainGrid(t,n),this._lastWidth=t,this._lastHeight=n)}}},{key:"_constrainGrid",value:function(e,t){if(this.isLandscape()){var n=this.$grid.height()*this._gridAspect+(this.$gridAndPrompt.width()-this.$grid.width());this.$gridAndPrompt.css({maxWidth:n,maxHeight:""})}else{var r=this.$grid.width()/this._gridAspect+(this.$gridAndPrompt.height()-this.$grid.height());this.$gridAndPrompt.css({maxWidth:"",maxHeight:r})}this.presenter.resizeGrid()}}]),t}(),w={responsive:!0,prompt:!0,clues:"vertical",orientation:"landscape"},_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.el,r=e.view,o=void 0===r?new m:r,u=d(e,["el","view"]);v(this,t);var s=y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i({view:o,el:n},u)));return s.puzzle=null,s.prompt=new c.default,s.grid=new l.default,s.clues={},s.meta=[],s.view.addPrompt(s.prompt.view),s.view.addGrid(s.grid.view),s._config={},s.configure(a.default.assign({},w,u)),s}return g(t,s.default.Presenter),o(t,[{key:"setPuzzle",value:function(e){e!==this.puzzle&&(this.puzzle=e,this.prompt.setPuzzle(e),this._setupClues(),this.meta.forEach(function(t){return t.setPuzzle(e)}),this.view.setGridAspectRatio(e.cols,e.rows),this.grid.setPuzzle(e),this.layout(),this.puzzle.moveCursor(this.puzzle.currentSquare,this.puzzle.currentOrientation))}},{key:"layout",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.view.handleResize(e)}},{key:"configure",value:function(e){for(var t in this._configFunctions=this._configFunctions||{responsive:this.setResponsive,prompt:this.togglePrompt,clues:this.setClueLayout,orientation:this.setLayoutOrientation,metadata:this.setMetadata},e){var n=e[t];if(null!=n){var r=this._configFunctions[t];if(!r)throw new Error("Unknown configuration option '"+t+"'");r.call(this,n),this._config[t]=n}}}},{key:"getConfig",value:function(e){return this._config[e]}},{key:"setResponsive",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.view.setResponsive(e)}},{key:"togglePrompt",value:function(e){this.view.togglePrompt(e)}},{key:"toggleRebus",value:function(e){this.grid.toggleRebus(e)}},{key:"setClueLayout",value:function(e){this.view.setClueLayout(e);var t=!0,n=!1,r=void 0;try{for(var i,o=Object.values(this.clues)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.setLayout(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}this._cluesLayout=e}},{key:"setLayoutOrientation",value:function(e){this.view.setLayoutOrientation(e)}},{key:"addMetadata",value:function(e){var t=new h.default({format:e.format,class:e.class});t.setPuzzle(this.puzzle),this.view.addMetadata(t.view,e.above?"above":"below",e.above||e.below),this.meta.push(t)}},{key:"setMetadata",value:function(e){var t=this;this.meta.forEach(function(e){return e.remove()}),this.meta=[],e.forEach(function(e){return t.addMetadata(e)})}},{key:"resizeGrid",value:function(){this.grid.view.resizeGrid()}},{key:"setRemoteState",value:function(e){this.grid.setRemoteState(e)}},{key:"toggleAutoCheck",value:function(e){this.grid.$el.toggleClass("check")}},{key:"_setupClues",value:function(){for(var e in this.clues)this.clues[e].remove(),delete this.clues[e];for(var t in this.puzzle.clues){var n=this.clues[t]=new f.default({orientation:t});this._cluesLayout&&n.setLayout(this._cluesLayout),this.view.addClueList(n.view),n.setPuzzle(this.puzzle)}}},{key:"onResize",value:function(e,t,n,i){var o=this;if(this.$el.width()<576)this.configure({orientation:"portrait",clues:"tiny",prompt:!1});else{this.view.isLandscape()?n<i&&this.setLayoutOrientation("portrait"):i<n&&this.setLayoutOrientation("landscape"),a.default.defer(function(){o.view.$el.hasClass("prompt-on")?o.grid.view.getScale()<.75&&(o.togglePrompt(!1),o.resizeGrid()):o.grid.view.getScale()>.9&&(o.togglePrompt(!0),o.resizeGrid())});var u=this.view.$cluesContainer,s=u.width(),l=u.css("min-width").match(/^(.*)px$/)||[],c=r(l,2)[1];s===+c?this.setClueLayout("vertical"):s>2*c?this.setClueLayout("horizontal"):"tiny"===this._cluesLayout&&this.setClueLayout("vertical")}}}]),t}();t.default=_},JVFu:function(e,t,n){var r={"./json":"ZZ31","./json.js":"ZZ31","./puz":"Rhup","./puz.js":"Rhup"};function i(e){return n(o(e))}function o(e){var t=r[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id="JVFu"},JzeR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RebusView=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("4JHP"),u=n("AupB"),s=(r=u)&&r.__esModule?r:{default:r};function l(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n("umQy");var p='\n  <div class="rebus-entry">\n    <form method="">\n      <input type="text" />\n    </form>\n    <span class="rebus-hidden-text" />\n  </div>\n',d=t.RebusView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.template,r=void 0===n?p:n,o=l(e,["template"]);c(this,t);var a=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i({template:r},o)));return a.$input=a.$("input"),a.$("form").on("submit",function(e){return a.submitForm()}),a.$input.on("blur",function(e){return a.submitForm()}),a.$input.on("input",function(e){return a.resizeInput()}),a.$span=a.$(".rebus-hidden-text"),a}return h(t,s.default.View),o(t,[{key:"submitForm",value:function(){return this.isShown()&&this.presenter.onFormSubmit(this.getText()),!1}},{key:"getText",value:function(){return this.$input.val().trim().toUpperCase()}},{key:"renderSquare",value:function(e){this.$input.val(e.letter),this.resizeInput()}},{key:"resizeInput",value:function(){var e=document.body.clientWidth;this.$el.css("max-width",e),this.$span.text(this.$input.val());var t=this.$el.parent();if(this.isShown()&&t.length){var n=this.$el.outerWidth(),r=-(n-t.outerWidth())/2,i=t.offset().left;r+i<0?r=-i:r+i+n>e&&(r=e-n-i),this.$el.css("left",r)}else this.$el.css("left","")}},{key:"show",value:function(){(function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.$input.focus(),this.resizeInput()}}]),t}(),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.view,r=void 0===n?new d:n,o=l(e,["view"]);c(this,t);var a=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i({view:r},o)));return a.puzzle=null,a}return h(t,(0,a.EventEmitterMixin)(s.default.Presenter,"submit")),o(t,[{key:"onFormSubmit",value:function(e){this.emit("submit",e)}},{key:"getText",value:function(){return this.view.getText()}},{key:"setSquare",value:function(e){this.view.renderSquare(e)}}]),t}();t.default=v},Lz0r:function(e,t){},MlDd:function(e,t,n){(function(n){(function(r){function i(e){"use strict";var t=this;return this.events={},this.state=null,this.options=e||{},this.options.env=this.options.env||(0===Object.keys(r).length&&n&&!0!==n.browser?"server":"client"),this.options.mode=this.options.mode||("server"!==this.options.env&&this.options.pushState&&r.history&&r.history.pushState?"pushState":"hashchange"),this.version="0.6.4","function"==typeof r.addEventListener&&(r.addEventListener("hashchange",function(){t.trigger("hashchange")}),r.addEventListener("popstate",function(e){if(t.state&&null===t.state.previousState)return!1;t.trigger("navigate")})),this}function o(e,t){for(var n in this.stack=o.global.slice(0),this.router=e,this.runCallback=!0,this.callbackRan=!1,this.propagateEvent=!0,this.value=e.path(),t)this[n]=t[n];return this}function a(e){this.route=e,this.keys=[],this.regex=i.regexRoute(e,this.keys)}i.regexRoute=function(e,t,n,r){return e instanceof RegExp?e:(e instanceof Array&&(e="("+e.join("|")+")"),e=e.concat(r?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(e,n,r,i,o,a){return t.push({name:i,optional:!!a}),n=n||"",(a?"":n)+"(?:"+(a?n:"")+(r||"")+(o||(r?"([^/.]+?)":"([^/]+?)"))+")"+(a||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+e+"$",n?"":"i"))},i._forEach=function(e,t){return"function"==typeof Array.prototype.forEach?Array.prototype.forEach.call(e,t):function(e,t){for(var n=0,r=this.length;n<r;++n)e.call(t,this[n],n,this)}.call(e,t)},i.prototype.get=i.prototype.add=function(e){var t=this,n=Array.prototype.slice.call(arguments,1,-1),r=Array.prototype.slice.call(arguments,-1)[0],i=new a(e),u=function(){var a=i.parse(t.path());if(a.match){var u={route:e,params:a.params,req:a,regex:a.match},s=new o(t,u).enqueue(n.concat(r));if(t.trigger("match",s,a),!s.runCallback)return t;if(s.previousState=t.state,t.state=s,s.parent()&&!1===s.parent().propagateEvent)return s.propagateEvent=!1,t;s.callback()}return t},s="pushState"!==t.options.mode&&"server"!==t.options.env?"hashchange":"navigate";return u().on(s,u)},i.prototype.trigger=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return this.events[e]&&i._forEach(this.events[e],function(e){e.apply(t,n)}),this},i.prototype.on=i.prototype.bind=function(e,t){var n=this,r=e.split(" ");return i._forEach(r,function(e){n.events[e]?n.events[e].push(t):n.events[e]=[t]}),this},i.prototype.once=function(e,t){var n=!1;return this.on(e,function(){return!n&&(n=!0,t.apply(this,arguments),t=null,!0)})},i.prototype.context=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){var r=arguments[0],i=arguments.length>2?Array.prototype.slice.call(arguments,1,-1):[],o=Array.prototype.slice.call(arguments,-1)[0],a=("/"!==e.slice(-1)&&"/"!==r&&""!==r?e+"/":e)+("/"!==r.substr(0,1)?r:r.substr(1));return t.add.apply(t,[a].concat(n).concat(i).concat([o]))}},i.prototype.navigate=function(e){return this.path(e).trigger("navigate")},i.prototype.path=function(e){var t;return"string"==typeof e?("pushState"===this.options.mode?(t=this.options.root?this.options.root+e:e,r.history.pushState({},null,t)):r.location?r.location.hash=(this.options.hashBang?"!":"")+e:r._pathname=e||"",this):void 0===e?t="pushState"===this.options.mode?r.location.pathname.replace(this.options.root,""):"pushState"!==this.options.mode&&r.location?r.location.hash?r.location.hash.split(this.options.hashBang?"#!":"#")[1]:"":r._pathname||"":!1===e?("pushState"===this.options.mode?r.history.pushState({},null,this.options.root||"/"):r.location&&(r.location.hash=this.options.hashBang?"!":""),this):void 0},i.listen=function(){var e,t;return arguments[0]&&arguments[1]?(e=arguments[0],t=arguments[1]):t=arguments[0],function(){for(var e in t)this.add.call(this,e,t[e]);return this}.call(new i(e||{}))},o.global=[],o.prototype.preventDefault=function(){this.runCallback=!1},o.prototype.stopPropagation=function(){this.propagateEvent=!1},o.prototype.parent=function(){return!!!(!this.previousState||!this.previousState.value||this.previousState.value!=this.value)&&this.previousState},o.prototype.callback=function(){this.callbackRan=!0,this.timeStamp=Date.now(),this.next()},o.prototype.enqueue=function(e,t){for(var n=Array.isArray(e)?t<e.length?e.reverse():e:[e];n.length;)this.stack.splice(t||this.stack.length+1,0,n.shift());return this},o.prototype.next=function(){var e=this;return this.stack.shift().call(this.router,this.req,this,function(){e.next.call(e)})},a.prototype.parse=function(e){var t=e.match(this.regex),n=this,r={params:{},keys:this.keys,matches:(t||[]).slice(1),match:t};return i._forEach(r.matches,function(e,t){var i=n.keys[t]&&n.keys[t].name?n.keys[t].name:t;r.params[i]=e?decodeURIComponent(e):void 0}),r},i.CallStack=o,i.Request=a,"function"!=typeof r.define||r.define.amd.grapnel?"object"==typeof e&&"object"==typeof e.exports?e.exports=t=i:r.Grapnel=i:r.define(function(e,t,n){return r.define.amd.grapnel=!0,i})}).call({},"object"==typeof window?window:this)}).call(t,n("W2nU"))},PbPb:function(e,t){e.exports=_},Rhup:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=u(n("3r50")),o=u(n("f+26")),a=u(n("7lks"));function u(e){return e&&e.__esModule?e:{default:e}}var s="ACROSS&DOWN\0";var l={GEXT:{load:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=e.squares[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;128&t.getUint8(u.idx)&&(u.shapebg="circle")}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},LTIM:{load:function(e,t){var n=t.getString8(0).split(","),i=r(n,2),o=i[0],a=i[1];e.state.time=+o,e.state.timerIsRunning=!!a}}};function c(e,t,n){var r=l[e];r&&r.load&&r.load(t,n)}t.default={load:function(e){var t=(0,i.default)(e);if(t.getString8(2,12)!==s)throw new Error("Not a puz file");var n=t.getUint8(44),r=t.getUint8(45),o=n*r,u=t.getUint16(46,!0),l=new a.default(r,n),f=52,h=t.getString8(f,o);f+=o;var p=t.getString8(f,o);f+=o;for(var d=0;d<o;++d)l.squares[d].solution=h[d],l.squares[d].letter="-"===p[d]?"":p[d];var v=t.getDelimitedString8(f,0);f+=v.length+1;var y=t.getDelimitedString8(f,0);f+=y.length+1;var g=t.getDelimitedString8(f,0);f+=g.length+1,l.meta.title=v,l.meta.author=y,l.meta.copyright=g;for(var b=[],m=0;m<u;++m){var w=t.getDelimitedString8(f,0);f+=w.length+1,b.push(w)}var _=t.getDelimitedString8(f,0);for(f+=_.length+1,l.meta.notes=_;f+8<t.byteLength;){var z=t.getString8(f,4);f+=z.length;var O=t.getUint16(f,!0);f+=4,c(z,l,(0,i.default)(e,f,O)),f+=O+1}var k=1,P=0,j=!0,S=!1,x=void 0;try{for(var C,E=l.squares[Symbol.iterator]();!(j=(C=E.next()).done);j=!0){var $=C.value;$.isStart("across")&&(l.addClue(k,"across",b[P++]),$.number=k),$.isStart("down")&&(l.addClue(k,"down",b[P++]),$.number=k),$.number&&++k}}catch(e){S=!0,x=e}finally{try{!j&&E.return&&E.return()}finally{if(S)throw x}}return l},fetch:function(e){return(0,o.default)(e).then(function(e){return e.arrayBuffer()})}}},RqUn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n("PbPb")),o=u(n("80Og")),a=u(n("7lks"));function u(e){return e&&e.__esModule?e:{default:e}}var s={"request-puzzle":null,puzzle:{default:function(e){return e.puzzle},send:function(e){return e?e.save("json"):null},receive:function(e){return e?a.default.load("json",e):null}},"puzzle-state":{default:function(e){return e.puzzle},send:function(e){return e?e.state:null}}},l=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r.puzzle=null,r.on("connect",function(){r.puzzle||r.send("request-puzzle")}),r.on("request-puzzle",function(){r.puzzle?(r.send("puzzle"),r.send("puzzle-state")):r._puzzleRequested=!0}),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),r(t,[{key:"setPuzzle",value:function(e){var t=this;if(e!==this.puzzle){this.puzzle=e;var n=i.default.throttle(function(){return t.send("puzzle-state")},100);this.puzzle.on("letter",n),this.puzzle.on("cursor",n),this._puzzleRequested&&(this.send("puzzle"),this._puzzleRequested=!1),this.send("puzzle-state")}}}]),t}();t.default=l},SiO5:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=n("80Og"),o=(r=i)&&r.__esModule?r:{default:r};var a={message:{queue:!0}},u=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),t}();t.default=u},Um79:function(e,t){e.exports=localforage},UnRa:function(e,t){},W2nU:function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function u(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var s,l=[],c=!1,f=-1;function h(){c&&s&&(c=!1,s.length?l=s.concat(l):f=-1,l.length&&p())}function p(){if(!c){var e=u(h);c=!0;for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run();f=-1,t=l.length}s=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new d(e,t)),1!==l.length||c||u(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},ZZ31:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=a(n("f+26")),o=a(n("7lks"));function a(e){return e&&e.__esModule?e:{default:e}}t.default={load:function(e){for(var t=new o.default(e.size.rows,e.size.cols),n=0;n<t.size;++n){var i=t.squares[n];i.solution=e.grid[n],i.number=e.gridnums[n],e.circles&&e.circles[n]&&(i.shapebg="circle")}for(var a in e.clues){var u=!0,s=!1,l=void 0;try{for(var c,f=e.clues[a][Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value,p=/^(\d+)\.\s(.*)/.exec(h),d=r(p,3),v=d[1],y=d[2];t.addClue(v,a,y)}}catch(e){s=!0,l=e}finally{try{!u&&f.return&&f.return()}finally{if(s)throw l}}}return t.meta.title=e.title,t.meta.author=e.author,t.meta.editor=e.editor,t.meta.date=e.date,t.meta.copyright=e.copyright,t},save:function(e){var t={size:{rows:e.rows,cols:e.cols},grid:e.squares.map(function(e){return e.solution}),gridnums:e.squares.map(function(e){return e.number}),circles:e.squares.map(function(e){return"circle"===e.shapebg?1:0}),clues:{},title:e.meta.title,author:e.meta.author,editor:e.meta.editor,date:e.meta.date,copyright:e.meta.copyright};for(var n in e.clues)t.clues[n]=e.clues[n].map(function(e){return e.number+". "+e.text});return t},fetch:function(e){return(0,i.default)(e).then(function(e){return e.json()})}}},b59J:function(e,t){e.exports=Mousetrap},cCAC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChatView=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n("0iPh")),a=c(n("Bfj3")),u=n("4JHP"),s=c(n("AupB")),l=c(n("SiO5"));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n("vX9C");var v={across:"across",down:"down",a:"across",d:"down"},y=/(\d+)\.?\s*(across|down|a\b|d\b)/gi,g=function(e,t,n){return'\n  <a class="chat-clue-link" href="javascript:void(0)"\n      data-number="'+t+'"\n      data-orientation="'+v[n.toLowerCase()]+'">\n    '+e+"\n  </a>\n"};function b(e){return e.replace(y,g)}var m='\n  <div class="chat-wrapper">\n    <div class="chat-status" />\n    <div class="chat-log">\n      <div class="chat-welcome">\n        <p>Use this space to chat with your peer. If you send a message with a\n        clue number, it will appear as a link:</p>\n        <p>E.g. '+b("1 across")+", "+b("2d")+'</p>\n      </div>\n    </div>\n    <div class="chat-bar">\n      <form action="">\n        <input type="text" />\n        <button type="submit">Send</button>\n      </form>\n    </div>\n  </div>\n',w=t.ChatView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.template,i=void 0===n?m:n,a=f(e,["template"]);h(this,t);var u=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r({template:i},a)));return u.$chatStatus=u.$(".chat-status"),u.$chatLog=u.$(".chat-log"),u.$lastChat=(0,o.default)(),u.$input=u.$(".chat-bar input"),u.$send=u.$(".chat-bar button"),u.$send.click(function(){var e=u.getInput();if(/^\s*$/.test(e))return!1;u.setInput(""),u.presenter.onSendClick(e),u.$input.focus()}),u.$el.on("click","a.chat-clue-link",function(e){var t=(0,o.default)(e.currentTarget);return u.presenter.onLinkClick(t.data("number"),t.data("orientation")),!1}),u.setStatus("Disconnected"),u}return d(t,s.default.View),i(t,[{key:"addChat",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"chat-self";this.$lastChat.hasClass(n)||(this.$lastChat.addClass("chat-last"),n+=" chat-first"),e=b(e),this.$lastChat=(0,o.default)(function(e,t,n){return'\n  <div class="chat-message '+n+'">\n    <span class="chat-text">'+e+'</span>\n    <span class="chat-timestamp">'+(0,a.default)(t,"M/D/YYYY h:mm:ss AM/PM")+"</span>\n  </div>\n"}(e,t?new Date(t):new Date,n)),this.$chatLog.append(this.$lastChat),this.$chatLog.stop(),this.$chatLog.animate({scrollTop:this.$chatLog.prop("scrollHeight")})}},{key:"setStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";this.$chatStatus.html('<div class="'+t+'">'+e+"</div>")}},{key:"getInput",value:function(){return this.$input.val()}},{key:"setInput",value:function(e){this.$input.val(e)}}]),t}(),_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.el,i=e.view,o=void 0===i?new w:i,a=f(e,["el","view"]);return h(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r({view:o,el:n},a)))}return d(t,(0,u.EventEmitterMixin)(s.default.Presenter,"link")),i(t,[{key:"onSendClick",value:function(e){return this.view.addChat(e),this.peer&&this.peer.send("message",e),!1}},{key:"onLinkClick",value:function(e,t){this.emit("link",e,t)}},{key:"setPeerManager",value:function(e){this.peer||this.setPeer(new l.default(e))}},{key:"setPeer",value:function(e){var t=this;this.peer=e,e.on("message",function(e,n){t.view.addChat(e,n,"chat-remote")}),e.on("connect",function(){t.view.setStatus("Connected to peer","chat-connected")}),e.on("close",function(){t.view.setStatus("Disconnected from peer")})}},{key:"getPeer",value:function(){return this.peer}}]),t}();t.default=_},cFSX:function(e,t){},d1IP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileView=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("AupB"),u=(r=a)&&r.__esModule?r:{default:r},s=n("4JHP");function l(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n("UnRa");var p=1,d='\n  <div class="file-input">\n    <form class="file-form" id="file-upload">\n      <label for="file-upload" />\n      <input name="file" type="file" />\n    </form>\n  </div>\n',v=t.FileView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.template,r=void 0===n?d:n,o=e.label,a=void 0===o?"Open":o,u=e.accept,s=void 0===u?"":u,h=l(e,["template","label","accept"]);c(this,t);var v=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i({template:r},h)));return v.$input=v.$("input"),v.$input.attr("id","file-input-"+p),v.$input.change(function(e){return v.presenter.onFile(v.getFile())}),s&&v.$input.attr("accept",s),v.$label=v.$("label"),v.$label.text(a).attr("for","file-input-"+p),v.$el.click(function(e){e.target===v.$el[0]&&v.$input.click()}),++p,v}return h(t,(0,s.EventEmitterMixin)(u.default.View,"file")),o(t,[{key:"getFile",value:function(){return this.$input[0].files[0]}}]),t}(),y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.label,r=void 0===n?"Open":n,o=e.accept,a=void 0===o?"":o,u=e.view,s=void 0===u?new v({label:r,accept:a}):u,h=l(e,["label","accept","view"]);return c(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i({view:s},h)))}return h(t,(0,s.EventEmitterMixin)(u.default.Presenter,"file")),o(t,[{key:"onFile",value:function(e){var t=this,n=new FileReader;n.onload=function(n){return t.emit("file",e.name,n.target.result)},n.readAsArrayBuffer(e)}}]),t}();t.default=y},"f+26":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return fetch("https://cors-anywhere.herokuapp.com/"+e,t).then(function(e){if(e.ok)return e;throw new Error("Network response was not ok: "+e.statusText)})}},gm7M:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.makeTool=function(e,t,n){if("string"==typeof n){var r=n;if(!(n=u[r]))throw new Error("No default tool '"+r+"'")}return"function"==typeof n?n(e,t):n};var i=a(n("Bfj3")),o=a(n("d1IP"));function a(e){return e&&e.__esModule?e:{default:e}}var u={title:function(e,t){return{html:function(e){var t=e.title,n=e.date,o=e.author,a=e.editor,u=e.copyright;if(!t&&n&&(t=(0,i.default)(n,"<b>DDDD</b>, MMMM D, YYYY")),!a){var s=o.match(/(.*)\/(.*)/)||["",o],l=r(s,3);o=l[1],a=l[2]}return o&&(o="By "+o.replace(/^\s*by\s+/i,"")),a&&(a="Edited by "+a.replace(/^\s*\w*\s*by\s+/i,"")),o=o&&a?o+"  "+a:o||a,u&&!/\u00A9/.test(u)&&(u=" "+u.replace(/^\s*\(c\)\s*/i,"")),'\n      <span class="meta-title">'+(t||"")+'</span>\n      <span class="meta-author">'+(o||"")+'</span>\n      <span class="meta-copyright">'+(u||"")+"</span>\n    "},class:"toolbar-puzzle-title"}},rebus:function(e,t){function n(e,n){e._preventClick||t.toggleTool(e,n),e._preventClick=!0,setTimeout(function(){e._preventClick=!1},100)}return{label:"rebus",events:{click:function(t,r,i){r._preventClick||(e.puzzlePresenter.toggleRebus(),n(r))}},setup:function(t,r){e.on("rebus-show",function(){return n(t,!0)}),e.on("rebus-hide",function(){return n(t,!1)})}}},p2p:function(e,t){return{label:"p2p",events:{click:function(){return e.toggleSidebar(e.chat)}}}},open:function(e,t){var n=new o.default({label:"open",accept:".puz"});return n.$el.addClass("toolbar-tool"),n.on("file",function(t,n){var i=t.match(/[^.]+$/)||[""],o=r(i,1)[0];console.log("got file!",o,t,n),e.loadPuzzle({type:o,data:n})}),n},check:function(e,t){return{label:"check",events:{click:function(t,n,r){e.puzzlePresenter.toggleAutoCheck(),r.toggleTool(n)}}}}};t.default=u},iCOP:function(e,t){},iyud:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataView=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("AupB"),u=(r=a)&&r.__esModule?r:{default:r};function s(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n("vpMJ");var h="<div></div>",p=t.MetadataView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.template,r=void 0===n?h:n,o=s(e,["template"]);return l(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i({template:r},o)))}return f(t,u.default.View),o(t,[{key:"setHtml",value:function(e){this.$el.html(e),this.$el.show(/\S/.test(this.$el.text()))}}]),t}(),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.view,r=void 0===n?new p:n,o=e.format,a=e.class,u=void 0===a?"metadata":a,f=s(e,["view","format","class"]);l(this,t);var h=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,i({view:r},f)));return h.puzzle=null,h.format=o,u&&h.$el.addClass(u),h}return f(t,u.default.Presenter),o(t,[{key:"setFormat",value:function(e){this.formatter=e,this._updateText()}},{key:"setPuzzle",value:function(e){this.puzzle=e,this._update()}},{key:"_update",value:function(){this.puzzle&&this.format?this.view.setHtml(""+this.format(this.puzzle.meta,this.puzzle)):this.view.setHtml("")}}]),t}();t.default=d},lVK7:function(e,t,n){"use strict";var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=l(n("MlDd")),o=l(n("4nC3")),a=l(n("qG3A")),u=l(n("6VXG")),s=l(n("n6G7"));function l(e){return e&&e.__esModule?e:{default:e}}n("iCOP"),(0,o.default)(["fetch"in window||"fetch","Promise"in window||"Promise","assign"in Object||"Object.assign","keys"in Object||"Object.keys"],function(){var e=new s.default({el:"#app",clues:"horizontal"});e.on("puzzle",function(t){e.show(),document.title=t.meta.title||"Crossword Demo"}),e.hide();var t=new u.default;function n(t){e.hide(),e.loadPuzzle(t)}function o(e,t,r,i){var o=(0,a.default)(e);return o.getUrl(t,r,i).then(function(e){n({type:o.type,url:e})})}e.setPeerManager(t);var l=new i.default;l.get("/join-room/:roomId",function(n){var i,o,a=n.params.roomId.split("|"),u=r(a,2),s=u[0],l=u[1];i=s,o=l,e.hide(),t.connect(i,o)});var c=l.context("/(create-room/:roomId)?",function(e,n,r){e.params.roomId&&t.connect(e.params.roomId),r()});c("puzzle-url/:type/:url(*)",function(e){n({type:e.params.type,url:e.params.url})}),c("puzzle/:source/:year/:month/:day",function(e){var t=e.params;o(t.source,t.year,t.month,t.day)}),c("puzzle/:source/current",function(e){o(e.params.source)}),c("puzzle/:source/:offset(-?[0-9]{1,})",function(e){var t=e.params,n=new Date;n.setDate(n.getDate()+parseInt(t.offset)),o(t.source,n.getFullYear(),n.getMonth()+1,n.getDate())}),l.get("",function(e){return l.navigate("/puzzle/jonesin/current")})})},n6G7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppView=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=d(n("PbPb")),a=n("4JHP"),u=d(n("7lks")),s=d(n("AupB")),l=d(n("HALP")),c=d(n("BeXi")),f=d(n("cCAC")),h=d(n("RqUn")),p=n("gm7M");function d(e){return e&&e.__esModule?e:{default:e}}function v(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n("8zfI");var m='\n  <div class="puzzle-app">\n    <div class="puzzle-layout" />\n  </div>\n',w=t.AppView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.template,i=void 0===n?m:n,o=v(e,["template"]);y(this,t);var a=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r({template:i},o)));return a.$layout=a.$(".puzzle-layout"),a.sidebar={},a}return b(t,s.default.View),i(t,[{key:"addToolbar",value:function(e){this.$el.prepend(e.$el)}},{key:"addPuzzle",value:function(e){this.$layout.append(e.$el)}},{key:"addSidebar",value:function(e){"right"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"right")?this.$layout.append(e.$el):this.$layout.prepend(e.$el)}}]),t}(),_=function(e){return{responsive:!0,prompt:!0,clues:"vertical",orientation:"landscape",toolbar:["title","open","check","rebus","p2p"]}},z=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.el,i=e.view,a=void 0===i?new w:i,u=v(e,["el","view"]);y(this,t);var s=g(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r({view:a,el:n},u)));return s.puzzle=null,s.components=[s.toolbar=new c.default,s.puzzlePresenter=new l.default,s.chat=(new f.default).hide()],s.view.addToolbar(s.toolbar),s.view.addPuzzle(s.puzzlePresenter),s.view.addSidebar(s.chat,"right"),s.chat.on("link",function(){return s.handleChatLink.apply(s,arguments)}),s.forwardEvents(s.puzzlePresenter.grid,"rebus-show","rebus-hide"),s._config={},s.configure(o.default.assign({},_(s),u)),s}return b(t,(0,a.EventEmitterMixin)(s.default.Presenter,"puzzle")),i(t,[{key:"setPuzzle",value:function(e){e!==this.puzzle&&(this.puzzle=e,this.peer&&this.peer.setPuzzle(e),this._componentCall("setPuzzle",e),this.emit("puzzle",e))}},{key:"loadPuzzle",value:function(e){var t=this,n=e.type,r=e.url,i=e.data;return r?u.default.fetch(n,r).then(function(e){return t.setPuzzle(e),e}):new Promise(function(e,r){var o=u.default.load(n,i);t.setPuzzle(o),e(o)})}},{key:"configure",value:function(e){var t=e.toolbar,n=v(e,["toolbar"]);t&&this.setTools(t),this.puzzlePresenter.configure(n)}},{key:"setTools",value:function(e){var t=this;this.toolbar.setTools(e.map(function(e){return(0,p.makeTool)(t,t.toolbar,e)}))}},{key:"addTool",value:function(e){this.toolbar.addTool(e)}},{key:"setPeerManager",value:function(e){this.peer||this.setPeer(new h.default(e)),this._componentCall("setPeerManager",e)}},{key:"setPeer",value:function(e){var t=this;this.peer=e,e.on("connect",function(){return t.toggleSidebar(t.chat,!0)}),e.on("puzzle",function(e){e&&t.setPuzzle(e)}),e.on("puzzle-state",function(e){t.puzzle&&t.puzzlePresenter.setRemoteState(e)}),this.puzzle&&e.setPuzzle(this.puzzle)}},{key:"getPeer",value:function(){return this.peer}},{key:"handleChatLink",value:function(e,t){if(this.puzzle&&this.puzzle.clues[t]){var n=!0,r=!1,i=void 0;try{for(var o,a=this.puzzle.clues[t][Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(u.number==e)return void this.puzzle.moveCursor(u.square,t)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}}},{key:"toggleSidebar",value:function(e,t){e.toggle(t),this.puzzlePresenter.layout()}},{key:"show",value:function(){return function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),this.puzzlePresenter.layout(),this}},{key:"_componentCall",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=!0,o=!1,a=void 0;try{for(var u,s=this.components[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;l[e]&&l[e].apply(l,n)}}catch(e){o=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}}}]),t}();t.default=z},oPln:function(e,t){},"q2j+":function(e,t){},qG3A:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){var t=o.default[e];if(!t)throw new Error("Unknown source: '"+e+"'");return t};var i=a(n("Bfj3")),o=a(n("APq2"));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t)this[n]=t[n]}return r(e,[{key:"getUrl",value:function(e,t,n){var r=e?new Date(+e,+t-1,+n):this.mostRecent();return this.days[r.getDay()]?(this.fixDate&&(r=this.fixDate(r)),Promise.resolve(this.formatUrl(r))):Promise.reject(new Error("No puzzle for date: "+e+"-"+t+"-"+n))}},{key:"formatUrl",value:function(e){return this.url.replace(/\{\{([^}]+)\}\}/,function(t,n){return(0,i.default)(e,n)})}},{key:"mostRecent",value:function(){for(var e=new Date,t=7;!this.days[e.getDay()]&&--t>0;)e.setDate(e.getDate()-1);return e}}]),e}();for(var s in o.default)o.default[s]=new u(o.default[s])},qIkO:function(e,t){e.exports=PubNub},rX2q:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n("PbPb"),u=(r=a)&&r.__esModule?r:{default:r};var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return o(e,[{key:"set",value:function(e){var t=[[e,[]]];do{var n=t.pop(),r=i(n,2),o=r[0],a=r[1];for(var s in o){var l=a.concat(s).join("."),c=o[s];u.default.isObject(c)?t.push([c,[l]]):this[l]=c}}while(t.length);return this}},{key:"parse",value:function(e){var t=JSON.parse(e);for(var n in t)this[n]=t[n];return this}},{key:"save",value:function(){return JSON.stringify(this)}}]),e}();t.default=new s},uYBq:function(e,t){e.exports=SimplePeer},umQy:function(e,t){},vX9C:function(e,t){},vpMJ:function(e,t){},"xP+I":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClueListView=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n("0iPh")),a=s(n("AupB")),u=s(n("A/A2"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n("q2j+");var p='\n  <div class="clue-list-wrapper">\n    <div class="clue-header" />\n    <ul class="clue-list" />\n  </div>\n',d=t.ClueListView=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.template,i=void 0===n?p:n,o=l(e,["template"]);c(this,t);var a=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r({template:i},o)));return a.$header=a.$(".clue-header"),a.$list=a.$(".clue-list"),a}return h(t,a.default.View),i(t,[{key:"setLayout",value:function(e){this.setExclusiveClass("clues",e)}},{key:"renderClueList",value:function(e,t){var n=this;this.$el.data("orientation",e),this.$header.text(e),this.$list.empty(),this.$list.append(t.map(function(e){return'\n      <li class="clue" data-idx='+e.idx+'>\n        <span class="clue-number">'+e.number+'</span>\n        <span class="clue-text">'+e.text+"</span>\n      </li>\n    "}));var r=t[t.length-1].number;this.$el.toggleClass("clues-3digit",r>=100),this.$("li.clue").click(function(e){return n.presenter.onClueClick((0,o.default)(e.currentTarget).data("idx"))})}},{key:"renderHighlight",value:function(e,t){this.$el.removeClass("highlight-primary highlight-secondary"),this.$el.find(".highlight").removeClass("highlight"),e&&(this.$el.addClass(t?"highlight-primary":"highlight-secondary"),this.highlightClue(e,"highlight"))}},{key:"highlightClue",value:function(e,t){this.$list.children("li").eq(e.idx).addClass(t)}},{key:"onClueClick",value:function(e){}},{key:"scrollTo",value:function(e){if(!this.hasExclusiveClass("clues","tiny")){var t=this.$list;t.stop(),clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(function(){var n=t.find("li").eq(e.idx),r=n.height(),i=n.offset().top,o=i+r,a=t.offset().top,s=a+t.height(),l=r*u.default["cluelist.scroll.buffer"],c=0;switch(u.default["cluelist.scroll.anchor"]){case"middle":(i<a+l||o>s-l)&&(c=(i+o)/2-(a+s)/2);break;case"top":default:(i<a||o>s-2*l)&&(c=i-a)}c&&t.animate({scrollTop:c+t.scrollTop()})},0)}}}]),t}(),v="vertical",y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.view,i=void 0===n?new d:n,o=(e.config,e.orientation),a=l(e,["view","config","orientation"]);c(this,t);var u=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r({view:i},a)));return u.orientation=o,u.setLayout(v),u.puzzle=null,u}return h(t,a.default.Presenter),i(t,[{key:"setLayout",value:function(e){this.view.setLayout(e)}},{key:"setPuzzle",value:function(e){var t=this;this.puzzle=e,this.view.renderClueList(this.orientation,e.clues[this.orientation]),this.puzzle.on("cursor",function(e){var n=e.clues[t.orientation],r=t.orientation===t.puzzle.currentOrientation;t.view.renderHighlight(n,r),t.view.scrollTo(n)})}},{key:"onClueClick",value:function(e){return this.puzzle.moveCursor(this.puzzle.clues[this.orientation][e].square,this.orientation),!1}}]),t}();t.default=y},yTfL:function(e,t){}});